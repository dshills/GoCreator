# Simple Code Generation Workflow
# This workflow demonstrates basic file operations

schema_version: "1.0"
name: "Simple Code Generation"
version: "1.0"

config:
  max_parallel: 4
  retries: 2
  timeout: "10m"
  allowed_commands:
    - go
    - git
    - golangci-lint

tasks:
  # Task 1: Create main.go
  - id: create_main
    name: "Create main.go"
    type: file_op
    inputs:
      operation: write
      path: "cmd/myapp/main.go"
      content: |
        package main

        import (
          "fmt"
        )

        func main() {
          fmt.Println("Hello, GoCreator!")
        }
    outputs:
      - main_file_created

  # Task 2: Create go.mod
  - id: create_gomod
    name: "Create go.mod"
    type: file_op
    inputs:
      operation: write
      path: "go.mod"
      content: |
        module myapp

        go 1.23
    outputs:
      - gomod_created

  # Task 3: Run go build (depends on both previous tasks)
  - id: build_app
    name: "Build Application"
    type: shell_cmd
    dependencies:
      - create_main
      - create_gomod
    inputs:
      cmd: "go"
      args:
        - "build"
        - "-o"
        - "bin/myapp"
        - "./cmd/myapp"
    timeout: "2m"
